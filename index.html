<!DOCTYPE html>
<html>
<head>
  <title>Microservice API Documentation</title>
  <link rel="stylesheet" type="text/css" href="https://unpkg.com/swagger-ui-dist@4/swagger-ui.css"> 
</head>

<body>
  <div id="swagger-ui"></div>

  <script src="https://unpkg.com/swagger-ui-dist@4/swagger-ui-bundle.js" charset="UTF-8"> </script> 
  <script>
  window.onload = function() {
    const maxMicroservices = 10; 
    const urls = [];

    for (let i = 1; i <= maxMicroservices; i++) {
      const nameEnvVar = `MICROSERVICE_${i}_NAME`;
      const urlEnvVar = `MICROSERVICE_${i}_URL`;

      const name = process.env[nameEnvVar];
      const url = process.env[urlEnvVar];

      if (name && url) { 
        urls.push({ url: url, name: name });
      } else {
        // Handle missing environment variables
        console.error(`Missing name or URL for Microservice ${i}`); 

        // Optional: Display an error message to the user
        const errorDiv = document.createElement('div');
        errorDiv.style.color = 'red';
        errorDiv.textContent = `Error: Missing configuration for Microservice ${i}`; 
        document.body.appendChild(errorDiv); 
      }
    }

    const ui = SwaggerUIBundle({
      urls: urls, 
      dom_id: '#swagger-ui' 
    });
  };
</script>

</body>
</html>
